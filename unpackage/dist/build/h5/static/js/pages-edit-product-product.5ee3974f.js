(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edit-product-product"],{"0061":function(t,e,i){"use strict";i.r(e);var a=i("ee89"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"0b4f":function(t,e,i){var a=i("34db");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("36780d06",a,!0,{sourceMap:!1,shadowMode:!1})},2059:function(t,e,i){"use strict";i.r(e);var a=i("965d"),o=i("483d");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("ea6c");var s,r=i("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"94829424",null,!1,a["a"],s);e["default"]=l.exports},"233e":function(t,e,i){"use strict";var a={uniIcon:i("76d3").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"product"},[a("v-uni-view",{staticClass:"pic"},[a("v-uni-view",{staticClass:"biao_05"},[t._v("商品幻灯图(可拖动)")]),a("v-uni-view",[a("robby-image-upload",{attrs:{value:t.pics,"server-url":t.serverUrl,"form-data":t.formData,"server-url-delete-image":t.DelServelUrl,limit:3},on:{delete:function(e){arguments[0]=e=t.$handleEvent(e),t.delImage.apply(void 0,arguments)},add:function(e){arguments[0]=e=t.$handleEvent(e),t.onImg.apply(void 0,arguments)},move:function(e){arguments[0]=e=t.$handleEvent(e),t.onMove.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"cu-form-group margin-top"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("商品名称：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.goods_name,callback:function(e){t.$set(t.goods,"goods_name",e)},expression:"goods.goods_name"}})],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("商品类型：")]),a("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"}},[a("v-uni-radio-group",{staticClass:"uni-list",staticStyle:{display:"flex","justify-content":"flex-end"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.leixin_chage.apply(void 0,arguments)}}},t._l(t.radioItems,(function(e,i){return a("v-uni-label",{key:i,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",{staticClass:"danxuan"},[a("v-uni-radio",{staticClass:"margin-left-sm",attrs:{value:e.value}}),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])],1)],1)})),1)],1)],1),0==t.mail?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("配送方式：")]),a("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show_mail_list=!0}}},[t._l(t.peisong,(function(e,i){return[t._v(t._s(t.peisong[i]))]})),a("uni-icon",{attrs:{type:"arrowdown",size:"20",color:"#A7A7A7"}})],2)],1):t._e(),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("商品分类：")]),a("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show_cate_list=!0}}},[t._v(t._s(t.category_name)),a("uni-icon",{attrs:{type:"arrowdown",size:"20",color:"#A7A7A7"}})],1)],1),a("v-uni-view",{staticClass:"cu-form-group",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jump_addgroup.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"title kuan"},[t._v("商品分组：")]),a("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show_cate_list=!0}}},[t._v(t._s(t.group)),a("uni-icon",{attrs:{type:"arrowdown",size:"20",color:"#A7A7A7"}})],1)],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("商品促销语：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.description,callback:function(e){t.$set(t.goods,"description",e)},expression:"goods.description"}})],1),t.is_sku?a("v-uni-view",{staticClass:"guige"},[a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("原价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.market_price,callback:function(e){t.$set(t.goods,"market_price",e)},expression:"goods.market_price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("普通用户价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.price,callback:function(e){t.$set(t.goods,"price",e)},expression:"goods.price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("VIP价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.vip_price,callback:function(e){t.$set(t.goods,"vip_price",e)},expression:"goods.vip_price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("分销提成：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.fx_tc,callback:function(e){t.$set(t.goods,"fx_tc",e)},expression:"goods.fx_tc"}})],1)],1):t._e(),a("v-uni-view",[t._l(t.pro_num,(function(e,o){return a("v-uni-view",{key:o,staticClass:"guige"},[a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("规格名称：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.sku[o].name,callback:function(e){t.$set(t.sku[o],"name",e)},expression:"sku[index].name"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("市场价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.get_market_price.apply(void 0,arguments)}},model:{value:t.sku[o].market_price,callback:function(e){t.$set(t.sku[o],"market_price",e)},expression:"sku[index].market_price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("普通用户价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.get_price(e,o)}},model:{value:t.sku[o].price,callback:function(e){t.$set(t.sku[o],"price",e)},expression:"sku[index].price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("VIP价：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.get_vip_price(e,o)}},model:{value:t.sku[o].vip_price,callback:function(e){t.$set(t.sku[o],"vip_price",e)},expression:"sku[index].vip_price"}})],1),a("v-uni-view",{staticClass:"cu-form-group "},[a("v-uni-view",{staticClass:"title kuan"},[t._v("分销提成：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.get_fx(e,o)}},model:{value:t.sku[o].fx_tc,callback:function(e){t.$set(t.sku[o],"fx_tc",e)},expression:"sku[index].fx_tc"}})],1),a("v-uni-view",{staticClass:"stop",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(o)}}},[a("img",{attrs:{src:i("47d4")}})])],1)})),a("v-uni-view",{staticClass:"cu-form-group ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tjge()}}},[a("v-uni-view",{staticClass:"title "},[a("uni-icon",{attrs:{type:"plus",size:"18",color:"red"}}),a("span"),t._v("添加商品规格")],1)],1)],2),a("v-uni-view",{staticClass:"cu-form-group margin-top"},[a("v-uni-view",{staticClass:"title kuan"},[t._v("总库存：")]),a("v-uni-input",{attrs:{placeholder:"请输入"},model:{value:t.goods.stock,callback:function(e){t.$set(t.goods,"stock",e)},expression:"goods.stock"}})],1),0==t.goods.leixin?a("v-uni-view",{staticClass:"cu-form-group ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jump_yunfei.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"title kuan"},[t._v("运费：")]),a("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"}},[a("uni-icon",{attrs:{type:"arrowright",size:"20",color:"#A7A7A7"}})],1)],1):t._e(),a("v-uni-view",{staticClass:"cu-form-group align-start"},[a("v-uni-view",{staticClass:"title"},[t._v("商品详情介绍：")]),a("v-uni-textarea",{attrs:{maxlength:"-1",disabled:null!=t.modalName,placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.textareaBInput.apply(void 0,arguments)}},model:{value:t.goods.content,callback:function(e){t.$set(t.goods,"content",e)},expression:"goods.content"}})],1),a("v-uni-view",{staticStyle:{height:"15px"}}),a("v-uni-view",{staticClass:"pic"},[a("v-uni-view",{staticClass:"biao_05"},[t._v("商品详情图片：(可拖动)")]),a("robby-image-upload",{attrs:{value:t.c_pics,"server-url":t.serverUrl,"form-data":t.c_formData,"server-url-delete-image":t.DelServelUrl,limit:10},on:{delete:function(e){arguments[0]=e=t.$handleEvent(e),t.c_delImage.apply(void 0,arguments)},add:function(e){arguments[0]=e=t.$handleEvent(e),t.c_onImg.apply(void 0,arguments)},move:function(e){arguments[0]=e=t.$handleEvent(e),t.onMove_c.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"H50"}),a("v-uni-view",{staticClass:"p_btn"},[t.is_edit?a("v-uni-view",{staticClass:"flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-red margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sub_edit()}}},[t._v("提交修改")])],1):a("v-uni-view",{staticClass:"flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-red margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sub()}}},[t._v("提交新增")])],1)],1),a("uni-popup",{attrs:{show:t.show_cate_list,type:"top",mode:"fixed"},on:{hidePopup:function(e){arguments[0]=e=t.$handleEvent(e),t.show_cate_list=!1}}},[a("v-uni-view",{staticClass:"uni-list leixin"},[a("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.cate_change.apply(void 0,arguments)}}},t._l(t.category_list,(function(e,i){return a("v-uni-label",{key:i,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",{staticClass:"xuan"},[a("v-uni-radio",{attrs:{value:i+""}}),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.category_name))])],1)],1)})),1)],1)],1),a("uni-popup",{attrs:{show:t.show_mail_list,type:"top",mode:"fixed"},on:{hidePopup:function(e){arguments[0]=e=t.$handleEvent(e),t.show_mail_list=!1}}},[a("v-uni-view",{staticClass:"uni-list leixin"},[a("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.mail_change.apply(void 0,arguments)}}},t._l(t.mail_list,(function(e,i){return a("v-uni-label",{key:i,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",{staticClass:"xuan"},[a("v-uni-checkbox",{attrs:{value:i+""}}),a("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(e.name))])],1)],1)})),1)],1)],1)],1)},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))},"34db":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.uni-mask[data-v-94829424]{position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-94829424]{position:fixed;z-index:999;background-color:#fff}.uni-popup-middle[data-v-94829424]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-94829424]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-94829424]{border-radius:%?10?%;padding:%?30?%}.uni-close-bottom[data-v-94829424],\n.uni-close-right[data-v-94829424]{position:absolute;bottom:%?-180?%;text-align:center;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-bottom[data-v-94829424]{margin:auto;left:0;right:0}.uni-close-right[data-v-94829424]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-94829424]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-top[data-v-94829424]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-94829424]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""]),t.exports=e},"36e8":function(t,e,i){"use strict";var a=i("ee27");i("99af"),i("a15b"),i("d81d"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("fc11")),n=a(i("a8ae")),s=a(i("2059")),r=a(i("7da6")),l=i("7aa3"),u={data:function(){var t;return{imgList:[],groupList:"",group_id:"",pics:[],photos:[],c_pics:[],c_photos:[],serverUrl:l.Api_url+"up_img",DelServelUrl:l.Api_url+"del_img",formData:{use:"pro_banner",back:"idurl"},c_formData:{use:"pro_img",back:"idurl"},sku:[],show_cate_list:!1,show_mail_list:!1,category_name:"",category_list:[],id:0,is_edit:!1,goods:(t={banner_imgs:[],goods_name:"",category_id:"",description:"",price:"",vip_price:"",market_price:"",leixin:"1",fx_tc:"",sales:"",stock:"",content:""},(0,o.default)(t,"goods_name",""),(0,o.default)(t,"shop_category_id",[]),t),pro_num:[],guige:!1,radioItems:[{name:"快递邮寄",value:"0"},{name:"到店核销",value:"1"}],market_price:"",price:"",vip_price:"",edit_group_id:"",fx_tc:"",mail:1,mail_list:[{id:"1",name:"A"},{id:"2",name:"B"},{id:"3",name:"C"}],peisong:"",pro_group_name:[],group_list:[{id:"1",name:"未分组"},{id:"2",name:"A组"},{id:"3",name:"B组"}],group:"未分组"}},components:{uniIcon:n.default,uniPopup:s.default,robbyImageUpload:r.default},computed:{is_sku:function(){return!(this.pro_num.length>0)}},watch:{"goods.price":function(t,e){1*t>.9*this.goods.market_price&&(this.$api.msg("用户价至少优惠10%"),this.goods.price=.9*this.goods.market_price)},"goods.vip_price":function(t,e){1*t>.99*this.goods.price&&(this.$api.msg("VIP价需小于用户价"),this.goods.vip_price=1*this.goods.price-1)},"goods.fx_tc":function(t,e){1*t>.99*this.goods.vip_price&&(this.$api.msg("提成不能大于VIP价"),this.goods.fx_tc=1*this.goods.vip_price-1)}},onLoad:function(t){this._request(),this.id=t.id,this.get_groupList()},onShow:function(){var t=uni.getStorageSync("groupList");this.groupList=t.groupList,this.group_id=t.group_id,this.goods.shop_category_id=t.group_id,t.group_name?this.group=t.group_name:this.group="未分组",uni.removeStorageSync("groupList")},methods:{ViewImage:function(t){uni.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},ChooseImage:function(){var t=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(e){0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths}})},get_market_price:function(t){this.market_price=t.target.value},get_price:function(t,e){var i=this;this.price=t.target.value,1*this.price>.9*this.market_price&&(this.$api.msg("用户价至少优惠10%"),i.sku[e].price=.9*this.market_price,i.price=.9*this.market_price)},get_vip_price:function(t,e){var i=this;this.vip_price=t.target.value,1*this.vip_price>.99*this.price&&(this.$api.msg("VIP价需小于用户价"),i.sku[e].vip_price=1*this.price-1,i.vip_price=i.sku[e].vip_price)},get_fx:function(t,e){var i=this;this.fx_tc=t.target.value,1*this.fx_tc>.99*this.vip_price&&(this.$api.msg("提成不能大于VIP价"),i.sku[e].fx_tc=1*this.vip_price-1,i.fx_tc=1*i.vip_price-1)},get_groupList:function(){this.groupList=this.$api.json.get_category},_request:function(t){this.category_list=this.$api.json.category,this.id>0&&this.get_pro(this.id)},get_pro:function(t){var e=this,i=this.category_list;this.is_edit=!0;var a=this;this.$api.http.get("shop/tgpro/"+t).then((function(t){for(var o in e.goods=t,e.pics=t.banner_imgs_list,e.photos=t.banner_imgs,e.c_pics=t.c_imgs_list,e.c_photos=t.c_imgs,e.edit_group_id=t.shop_category_id,t.sku.json&&(e.sku=t.sku.json),t.sku.json)a.pro_num.push(1);for(var n in i)i[n]["category_id"]==t.category_id&&(a.category_name=i[n].category_name);var s=[];for(var r in a.groupList){var l=a.groupList[r].id;s[l]=a.groupList[r].name}for(var u=0;u<a.edit_group_id.length;u++){var c=a.edit_group_id[u];e.pro_group_name[u]=s[c]}t.shop_category_id?e.group=e.pro_group_name+"":e.group="未分组"}))},jump_addgroup:function(){uni.navigateTo({url:"./addgroup/addgroup"})},onImg:function(t){this.pics=t.allImages;var e=t.allImages;for(var i in e){var a=e[i].id;this.photos[i]=a}},onMove:function(t){this.pics=t;var e=t;for(var i in e){var a=e[i].id;this.photos[i]=a}},onMove_c:function(t){this.c_pics=t;var e=t;for(var i in e){var a=e[i].id;this.c_photos[i]=a}},delImage:function(t){var e=[];for(var i in t.allImages)e[i]=t.allImages[i].id;this.photos=e},c_onImg:function(t){this.c_pics=t.allImages;var e=t.allImages;for(var i in e){var a=e[i].id;this.c_photos[i]=a}},c_delImage:function(t){var e=[];for(var i in t.allImages)e[i]=t.allImages[i].id;this.c_photos=e},leixin_chage:function(t){this.goods.leixin=t.detail.value,this.mail=t.detail.value,1==t.detail.value&&(this.peisong="")},tjge:function(){this.pro_num.push("1"),this.sku.push({name:"",price:"",vip_price:"",fx_tc:"",market_price:""})},close:function(t){this.pro_num.splice(t,1),this.sku.splice(t,1),0!=this.sku.length&&0!=this.pro_num.length||(this.sku=[],this.pro_num=[])},changeIndicatorDots:function(t){this.isYasuo=!this.isYasuo},cate_change:function(t){var e=t.detail.value;this.category_name=this.category_list[e].category_name,this.goods.category_id=this.category_list[e].category_id,this.show_cate_list=!1},mail_change:function(t){var e=this,i=t.target.value.map(String),a=[];for(var o in i){var n=i[o];a[o]=e.mail_list[n].name+""}this.peisong=a.join(" ")},previewImage:function(){uni.previewImage({urls:this.imgList})},buy:function(t){var e=this;this.$api.http.post("user/pay_vip",{type:t}).then((function(t){e.$api.msg("购买成功"),setTimeout((function(){uni.switchTab({url:"/pages/user/user"})}),1500)}))},jump_yunfei:function(){uni.navigateTo({url:"/pages/edit/yunfei/yunfei"})}}};e.default=u},"47d4":function(t,e){t.exports="data:image/png;base64,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"},"483d":function(t,e,i){"use strict";i.r(e);var a=i("e8c9"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"48c3":function(t,e,i){"use strict";i.r(e);var a=i("36e8"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"54c3":function(t,e,i){"use strict";var a=i("afcb"),o=i.n(a);o.a},6242:function(t,e,i){var a=i("74c0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("21a29f10",a,!0,{sourceMap:!1,shadowMode:!1})},6386:function(t,e,i){"use strict";i.r(e);var a=i("233e"),o=i("48c3");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("54c3");var s,r=i("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"61aaa790",null,!1,a["a"],s);e["default"]=l.exports},"74c0":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".imageUploadContainer[data-v-6fcb8c85]{padding:%?10?% %?5?%;margin:%?10?% %?5?%}.name[data-v-6fcb8c85]{text-align:center;margin-top:%?-30?%}.dragging[data-v-6fcb8c85]{-webkit-transform:scale(1.2);transform:scale(1.2)}.imageUploadList[data-v-6fcb8c85]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.imageItem[data-v-6fcb8c85], .imageUpload[data-v-6fcb8c85]{width:%?200?%;height:%?200?%;margin:%?30?% %?15?% %?30?%}.imageDel[data-v-6fcb8c85]{position:relative;left:%?180?%;bottom:%?225?%;background-color:rgba(0,0,0,.5);width:%?36?%;text-align:center;line-height:%?35?%;border-radius:%?17?%;color:#fff;font-size:%?30?%;padding-bottom:%?2?%}.imageItem uni-image[data-v-6fcb8c85], .moveImage[data-v-6fcb8c85]{width:%?200?%;height:%?200?%;border-radius:%?8?%}.imageUpload[data-v-6fcb8c85]{line-height:%?200?%;text-align:center;font-size:%?150?%;color:#d9d9d9;border:1px solid #d9d9d9;border-radius:%?8?%}.moveImage[data-v-6fcb8c85]{position:absolute}.uni-list[data-v-6fcb8c85]{width:260px}.popup_foot[data-v-6fcb8c85]{display:-webkit-box;display:-webkit-flex;display:flex;border-top:1px #f9f9f9 solid;line-height:40px;height:40px;margin-top:30px}.build_01[data-v-6fcb8c85]{line-height:35px}.build_01 uni-input[data-v-6fcb8c85]{background:#ededed}.popup_foot_l[data-v-6fcb8c85]{width:50%;text-align:center}.popup_foot_r[data-v-6fcb8c85]{width:50%;text-align:center;border-left:1px #f9f9f9 solid;color:#5095d3}",""]),t.exports=e},"7da6":function(t,e,i){"use strict";i.r(e);var a=i("ee41"),o=i("0061");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("d28c");var s,r=i("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"6fcb8c85",null,!1,a["a"],s);e["default"]=l.exports},"965d":function(t,e,i){"use strict";var a,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-mask",style:{top:t.offsetTop+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hide.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+t.position+" uni-popup-"+t.mode},[t._v(t._s(t.msg)),t._t("default"),"middle"===t.position&&"insert"===t.mode?i("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===t.buttonMode,"uni-close-right":"right"===t.buttonMode},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeMask.apply(void 0,arguments)}}}):t._e()],2)],1)},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))},afcb:function(t,e,i){var a=i("bbd8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("85f80094",a,!0,{sourceMap:!1,shadowMode:!1})},bbd8:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".pic[data-v-61aaa790]{padding:%?20?% %?10?%;background-color:#fff}.H50[data-v-61aaa790]{height:80px}.kuan[data-v-61aaa790]{width:120px;text-align:right}.input-view[data-v-61aaa790]{font-size:%?28?%}.leixin[data-v-61aaa790]{height:300px;width:50vw;overflow:hidden;overflow-x:hidden;overflow-y:scroll}.xuan[data-v-61aaa790]{padding-bottom:10px}.close-view[data-v-61aaa790]{text-align:center;line-height:14px;height:16px;width:16px;border-radius:50%;background:#ff5053;color:#fff;position:absolute;top:-6px;right:-4px;font-size:12px}.product[data-v-61aaa790]{background-color:#f7f6fb;height:100%}.product .head[data-v-61aaa790]{position:relative;padding:0 5px}.product .head img[data-v-61aaa790]{width:100%;height:150px}.product .btn[data-v-61aaa790]{position:absolute;top:10px;right:5px}.product .btn uni-button[data-v-61aaa790]{font-size:10px;color:red;border:none;border-radius:20px;background-color:#cbcbcb;padding:5px}.product .top[data-v-61aaa790]{box-shadow:0 0 8px 5px #ededed;height:1px;background-color:#ededed}.product .pro_tit[data-v-61aaa790]{padding:15px 10px 10px;border-bottom:1px solid #ededed}.product .BH[data-v-61aaa790]{height:5px;background-color:#f2f2f2}.product .biao[data-v-61aaa790]{background-color:#fff;margin:10px;border-radius:5px;border:1px solid #eaeaea}.product .biao span[data-v-61aaa790]{color:red;padding-right:5px}.product .biao uni-textarea[data-v-61aaa790]{width:100%;border-bottom:1px solid #ededed;padding:10px;height:100px}.product .biao_01[data-v-61aaa790]{padding:10px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex}.product .biao_01_l[data-v-61aaa790]{padding-top:7px;-webkit-flex-shrink:0;flex-shrink:0}.product .biao_01_1[data-v-61aaa790]{padding-top:5px}.product .biao_01_r[data-v-61aaa790]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1}.product .biao_01_r uni-text[data-v-61aaa790]{padding-right:10px}.product .biao_02_r select[data-v-61aaa790]{padding:0 10px;line-height:25px;min-width:80px;text-align:center}.product .biao_01_m[data-v-61aaa790]{border-right:1px solid #ededed}.product .biao_02[data-v-61aaa790]{padding:13px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.product .biao_03[data-v-61aaa790]{padding:13px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex}.product .biao_04[data-v-61aaa790]{display:-webkit-box;display:-webkit-flex;display:flex;padding:10px 10px 10px;border-bottom:1px solid #ededed}.product .biao_04_l[data-v-61aaa790]{display:-webkit-box;display:-webkit-flex;display:flex;width:50%;line-height:30px;padding-right:10px}.product .biao_04_l_i[data-v-61aaa790]{-webkit-flex-shrink:1;flex-shrink:1}.product .biao_04_l_1[data-v-61aaa790]{-webkit-flex-shrink:0;flex-shrink:0}.product .biao_05[data-v-61aaa790]{padding:10px 10px 0;font-size:16px}.product .jgkc[data-v-61aaa790]{padding:15px 10px;border-bottom:1px solid #ededed}.product .p_btn[data-v-61aaa790]{background:#f7f6fb;padding:0 10px 0;position:fixed;bottom:0;width:100%;z-index:9999}.product .pro_btn[data-v-61aaa790]{background-color:#e5e5e5;padding:10px;text-align:center;border-radius:20px;background-color:#df421d;color:#fff;width:100%}.product .guige[data-v-61aaa790]{border:1px solid #ededed;margin:10px 20px 10px 10px;position:relative}.product .stop[data-v-61aaa790]{position:absolute;right:-15px;top:60px}.product .stop img[data-v-61aaa790]{width:30px;height:30px}.product .uni-input-input[data-v-61aaa790],\n.product .uni-input[data-v-61aaa790]{height:30px;line-height:30px}",""]),t.exports=e},d28c:function(t,e,i){"use strict";var a=i("6242"),o=i.n(a);o.a},e8c9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniPopup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(t){this.offsetTop=t?44:0}},created:function(){var t=0;t=this.h5Top?0:44,this.offsetTop=t},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};e.default=a},ea6c:function(t,e,i){"use strict";var a=i("0b4f"),o=i.n(a);o.a},ee41:function(t,e,i){"use strict";var a,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"imageUploadContainer"},[i("v-uni-view",{staticClass:"imageUploadList"},[t._l(t.value,(function(e,a){return i("v-uni-view",{key:a,staticClass:"imageItem"},[i("v-uni-image",{class:{dragging:t.isDragging(a)},attrs:{src:e.url,draggable:"true","data-index":a},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.start.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.move.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.stop.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}}),t.isShowDel?i("v-uni-view",{staticClass:"imageDel",attrs:{"data-index":a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteImage.apply(void 0,arguments)}}},[t._v("x")]):t._e()],1)})),t.isShowAdd?i("v-uni-view",{staticClass:"imageUpload",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectImage.apply(void 0,arguments)}}},[t._v("+")]):t._e()],2),t.showMoveImage?i("v-uni-image",{staticClass:"moveImage",style:{left:t.posMoveImageLeft,top:t.posMoveImageTop},attrs:{src:t.moveImagePath}}):t._e()],1)},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))},ee89:function(t,e,i){"use strict";var a;i("a434"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"robby-image-upload",props:["value","enableDel","enableAdd","enableDrag","serverUrl","formData","limit","fileKeyName","showUploadProgress","serverUrlDeleteImage"],data:function(){return{role_id:"",edit_box:!1,e_data:"",imageBasePos:{x0:-1,y0:-1,w:-1,h:-1},showMoveImage:!1,moveImagePath:"",moveLeft:0,moveTop:0,deltaLeft:0,deltaTop:0,dragIndex:null,targetImageIndex:null}},computed:{posMoveImageLeft:function(){return this.moveLeft+"px"},posMoveImageTop:function(){return this.moveTop+"px"},isShowDel:function(){return!1!==this.enableDel},isShowAdd:function(){return!1!==this.enableAdd&&!(this.limit&&this.value.length>=this.limit)},isDragable:function(){return!1!==this.enableDrag}},methods:{sub:function(){this.$emit("sub")},selectImage:function(){a=this,a.value||(a.value=[]),uni.chooseImage({count:a.limit?a.limit-a.value.length:999,success:function(t){var e=t.tempFilePaths;if(a.limit){var i=a.limit-a.value.length;if(i<e.length)return void uni.showToast({title:"图片总数限制为"+a.limit+"张，当前还可以选"+i+"张",icon:"none",mask:!1,duration:2e3})}console.log("s1:",e);for(var o=[],n=0;n<e.length;n++)o.push(e[n]);if(a.serverUrl){for(var s=a.value.length-e.length,r=[],l=a.fileKeyName?a.fileKeyName:"upload-images",u=0,c=function(t){r.push(new Promise((function(i,o){var n=s+t;uni.uploadFile({url:a.serverUrl,fileType:"image",formData:a.formData,filePath:e[t],header:{token:uni.getStorageSync("token")},name:l,success:function(t){200===t.statusCode?(a.value.push(JSON.parse(t.data)),console.log("s3:",a.value),u++,a.showUploadProgress&&uni.showToast({title:"上传进度："+u+"/"+e.length,icon:"none",mask:!1,duration:1e3}),console.log("success to upload image: "+t.data),i("success to upload image:"+n)):(console.log("fail to upload image:"+t.data),o("failt to upload image:"+n))},fail:function(t){console.log("fail to upload image:"+t),o("failt to upload image:"+n)}})})))},d=0;d<e.length;d++)c(d);Promise.all(r).then((function(t){console.log("s4:",a.value),a.$emit("add",{currentImages:e,allImages:a.value}),a.$emit("input",a.value)}))}else a.$emit("add",{currentImages:e,allImages:a.value}),a.$emit("input",a.value)}})},deleteImage:function(t){var e=this;uni.showModal({title:"提示",content:"确定删除？",success:function(i){if(i.confirm){var a=t.currentTarget.dataset.index,o=e.value[a];e.value.splice(a,1),e.del(o)}}})},del:function(t){var e=t.id;this.serverUrlDeleteImage&&uni.request({url:this.serverUrlDeleteImage,method:"POST",header:{token:uni.getStorageSync("token")},data:{id:e},success:function(t){console.log(t.data)}}),this.$emit("delete",{currentImage:t,allImages:this.value}),this.$emit("input",this.value)},previewImage:function(t){var e=t.currentTarget.dataset.index;uni.previewImage({current:this.value[e],indicator:"number",loop:"true",urls:this.value})},initImageBasePos:function(){var t=.024;a=this,uni.getSystemInfo({success:function(e){var i=e.screenWidth,o=Math.ceil(t*i),n=Math.ceil((i-2*o)/4);a.imageBasePos.x0=o,a.imageBasePos.w=n,a.imageBasePos.h=n}})},findOverlapImage:function(t,e){var i=Math.floor((t-this.imageBasePos.x0)/this.imageBasePos.w),a=Math.floor((e-this.imageBasePos.y0)/this.imageBasePos.h),o=4*a+i;return o},isDragging:function(t){return this.dragIndex===t},start:function(t){if(this.isDragable){if(this.dragIndex=t.currentTarget.dataset.index,this.moveImagePath=this.value[this.dragIndex],this.showMoveImage=!0,-1===this.imageBasePos.y0){this.initImageBasePos();var e=Math.floor(this.dragIndex/4)*this.imageBasePos.h,i=t.currentTarget.offsetTop;this.imageBasePos.y0=i-e}this.moveLeft=t.target.offsetLeft,this.moveTop=t.target.offsetTop}},move:function(t){if(this.isDragable){var e=t.touches[0];this.targetImageIndex=this.findOverlapImage(e.clientX,e.clientY),0===this.deltaLeft&&(this.deltaLeft=e.clientX-this.moveLeft,this.deltaTop=e.clientY-this.moveTop),this.moveLeft=e.clientX-this.deltaLeft,this.moveTop=e.clientY-this.deltaTop}},stop:function(t){this.isDragable&&(null!==this.dragIndex&&null!==this.targetImageIndex&&(this.targetImageIndex<0&&(this.targetImageIndex=0),this.targetImageIndex>=this.value.length&&(this.targetImageIndex=this.value.length-1),this.dragIndex!==this.targetImageIndex&&(this.value[this.dragIndex]=this.value[this.targetImageIndex],this.value[this.targetImageIndex]=this.moveImagePath)),this.dragIndex=null,this.targetImageIndex=null,this.deltaLeft=0,this.deltaTop=0,this.showMoveImage=!1,this.$emit("move",this.value))}}};e.default=o}}]);